id: doa_antenna_correction
label: Antenna Correction
category: '[doa]'

templates:
  imports: from gnuradio import doa
  make: doa.antenna_correction(${num_ant_ele}, ${config_filename})

parameters:
- id: num_ant_ele
  label: Num Antenna Elements
  dtype: int
  
- id: config_filename
  label: Config File
  dtype: file_open
  default: /tmp/antenna.cfg

inputs:
- label: in
  domain: stream
  dtype: complex
  multiplicity: ${ num_ant_ele }

outputs:
- label: out
  domain: stream
  dtype: complex
  multiplicity: ${ num_ant_ele }

documentation: |-
  This block uses antenna gain and phase values stored in a config file 
  to scale the autocorrelation matrix such that the response of the 
  antennas in the array are homogenous.
  
  Args:
    num_ant_ele: Num. of elements in the antenna array.
    config_filename: Config file that has been generated by one of the 
    antenna calibration blocks.

file_format: 1
